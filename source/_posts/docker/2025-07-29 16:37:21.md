---
title: Docker 策略
date: 2025-07-29 16:37:21
tags:
  - Docker
categories:
  - Docker
---

## Docker 策略

```
docker run -itd --name test_nginx --restart unless-stopped test_nginx_image_backup
```

> 更新

```bash
docker update --restart=unless-stopped my_nginx
```

## --restart 🆚 总结对比

```bash
docker inspect -f '{{.HostConfig.RestartPolicy.Name}}' <容器名\id>
```

|      策略      |                     说明                     | 系统重启后 | 异常退出 | 正常退出 | 手动停止后 |
| :------------: | :------------------------------------------: | :--------: | :------: | :------: | :--------: |
|   no（默认）   |                  不自动重启                  |     否     |    否    |    否    |    N/A     |
|     always     |                 总是自动重启                 |     是     |    是    |    是    |   会重启   |
| on-failure[:N] |          非 0 退出才重启，最多 N 次          |     否     |    是    |    否    |     否     |
| unless-stopped | 总是自动重启，但如果你手动停过它，就不再启动 |     是     |    是    |    是    |  不会重启  |
