---
title: logging 模块
date: 2025-06-03 15:21:32
tags:
  - logging
  - 模块
categories:
  - "Python"
---

# logging 模块

## 基本用法
```bash
level=logging.INFO
设置记录级别为INFO，意味着会记录INFO、WARNING、ERROR和CRITICAL级别的日志，DEBUG级别的会被忽略

format参数
定义日志输出格式：

%(asctime)s：记录时间（如：2023-08-01 12:00:00,000）
%(levelname)s：日志级别（如：INFO、ERROR）
%(message)s：日志内容
handlers数组
包含两个输出渠道：
FileHandler：将日志写入当前目录的crawler.log文件（使用UTF-8编码）
StreamHandler：将日志实时输出到控制台
实际效果：
程序运行时既会在控制台实时显示日志，又会将日志永久保存到crawler.log文件中，格式示例：
```

## 定义日志格式
```python
import logging

# 创建日志格式
formatter = logging.Formatter('[%(asctime)s] %(levelname)s - %(message)s')

# 创建 info 日志处理器
info_handler = logging.FileHandler('info.log', encoding='utf-8')
info_handler.setLevel(logging.INFO)
info_handler.setFormatter(formatter)

# 创建 warning 日志处理器
warning_handler = logging.FileHandler('warning.log', encoding='utf-8')
warning_handler.setLevel(logging.WARNING)
warning_handler.setFormatter(formatter)

# 创建 error 日志处理器
error_handler = logging.FileHandler('error.log', encoding='utf-8')
error_handler.setLevel(logging.ERROR)
error_handler.setFormatter(formatter)

# 创建控制台输出处理器
# console_handler = logging.StreamHandler()
# console_handler.setLevel(logging.INFO)
# console_handler.setFormatter(formatter)

# 配置 root logger（主日志器）
logging.basicConfig(
    level=logging.INFO,
    handlers=[info_handler, warning_handler, error_handler]
    # handlers=[info_handler, warning_handler, error_handler, console_handler]

)

# === 模拟日志输出 ===
logging.info("程序启动，初始化成功。")
logging.warning("警告：配置文件中某些值未设置，将使用默认值。")
logging.error("错误：无法连接到数据库，请检查配置。")
```